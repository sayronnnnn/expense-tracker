# fly.toml app configuration file generated for expense-tracker-api

app = "expense-tracker-api"
primary_region = "sin"

build = {dockerfile = "backend/Dockerfile"}

[build.args]

[env]
MONGODB_DB_NAME = "expense_tracker"
ENVIRONMENT = "production"

[[services]]
internal_port = 8000
processes = ["app"]
protocol = "tcp"
script_checks = []

  [services.concurrency]
  hard_limit = 25
  soft_limit = 20
  type = "connections"

  [[services.http_checks]]
  grace_period = "5s"
  interval = "30s"
  method = "get"
  path = "/health"
  protocol = "http"
  timeout = "5s"
  tls_skip_verify = false

  [[services.ports]]
  handlers = ["http"]
  port = 80
  proto = "tcp"

  [[services.ports]]
  handlers = ["tls", "http"]
  port = 443
  proto = "tcp"

[[statics]]
guest_path = "/app"
url_prefix = "/health"
